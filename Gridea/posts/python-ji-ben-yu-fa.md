---
title: 'Python基本语法'
date: 2019-08-27 13:51:40
tags: []
published: true
hideInList: false
feature: 
---
# 常量变量 & 类型系统
## 常量变量
常量：一旦赋值，就不能改变它的值。也就是说不能对它进行重新赋值。
变量：是一个名字，在赋值符号的左边，这个名字可以指代赋值符号右边的内容。
注意：Python不存在常量。因为Python一切皆对象，Python赋值即定义。
## 类型系统
python是门强类型的动态语言，但它同时又是一门解释性语言。
那么作为强类型语言，python就有自己的类型系统，python的类型系统分为基本类型和内置数据结构。
基本类型分为：
* int
* float
* bool
* None

str、list、dict等在官方文档中查到，隶属于：built-in structure。
内置数据结构分为：
* str
* list
* tuple
* set
* dict
* bytes
* bytearray

动态语言指一个变量的类型可以被多次修改、赋值。
而在java、c#这种静态语言中，一旦定义了一个变量
```
string strA = 'a'
```
就无法改变它的类型了，只能改变值。
# 基本数据类型
## 整型和浮点型
在python2里区分整型和长整型，python3里不区分，只有整型。
对于int来说，不存在溢出。
但float会溢出，会损失精度，这也就是我们常说的精度失效。
举个简单的栗子：
```
In[1]：3.3 * 6
Out[1]：19.799999999999997
```
### 为什么会有精度失效
因为计算机都是用二进制表示的，那么势必会存在0和1之间的数字没法表示。
### 二进制小数转十进制小数
采用方法：按权展开求和法
举个栗子：将101.111(2)这个二进制小数转换成十进制数。
计算：1*(2^2)+0*(2^1)+1*(2^0)+1*(2^(-1))+1*(2^(-2))+1*(2^(-3))=5.875
### 十进制小数转二进制小数
十进制数的整数位是二进制数的整数位，十进制数的小数位是二进制数的小数位
假如有小数111.4(10)，进行计算
小数位采用“乘二取整法”（顺序排列），取整就是取整数位上的数字
| 乘二 |  取整 |
| - | - |
| 0.4\*2=0.8 | 0 |
| 0.8\*2=1.6 | 1 |
| 0.6\*2=1.2 | 1 |
| 0.2\*2=0.4 | 0 |
| 0.4\*2=0.8 | 0 |
| 0.8\*2=1.6 | 1 |
| 0.6\*2=1.2 | 1 |
| 0.2\*2=0.4 | 0 |
经过计算发现出现了循环，0.01100110...(循环0110)
整数位采用“除二取余法”（逆序排列）
| 除二 | 商 | 余数 |
| - | - | - |
| 111/2 | 55 | 1 |
| 55/2 | 27 | 1 |
| 27/2 | 13 | 1 |
| 13/2 | 6 | 1 |
| 6/2 | 3 | 0 |
| 3/2 | 1 | 1 |
| 1/2 | 0 | 1 |
所以整数位是1101111
最终结果是整数位和小数位合并1101111.01100110......
### 代码
从代码角度出发，如何规避这类情况？那就要用到经常提到的一个概念：“精确到小数点后面多少位”
```
from decimal import Decimal
from decimal import getcontext
getcontext().prec = 8
In[]：Decimal(3.3) * Decimal(6)
Out[]：Decimal('19.800000')
```
## None
None就是一个类型，在js里面有undefined和null，但是python只有一个None。
None既不是空字符串，也不是未定义
None在判断语句中位False，但None不等于False
```
In[]：None == False
Out[]：False
```
## Bool
Bool就是True or False。
## 总结
基本数据类型一共有4种，int、float、bool、None
# 运算符
## 算数运算符
* \+
* \-
* \*
* \/
* \//
* \**
* \%

以上就是python运算符，但是要注意：只能对int和float做运算。
特别说明：
/运算符在python3是自然除，python2是整除
## 比较运算符
* \>
* \<
* \=
* \!=
* \>=
* \<=

所有比较运算符的返回值都是bool类型
## 逻辑运算符
* and
* or
* not

逻辑运算符的两边必须是True或False
注意：逻辑运算符的短路
or运算，只要执行到第一个位true的时候之后就不执行了。
## 成员运算符
* in
* not in

## 身份运算符
* is
* is not

## 位运算符
* \<<
* \>>
* &
* |
* ^ 异或

位运算符用在哪里呢？
### 判断奇偶数
我们可以利用&运算符的特性来判断二进制数最后一位是0还是1。
用if((a&1) == 0)代替if(a%2 == 0)来判断a是不是偶数。
### 交换两个数
先了解一下^的几个特性
* a^a = 0
* a^0 = a
* (a^b)^c = a^(b^c)

交换两个数的方法为：
```
a ^= b
b ^= a
a ^= b
```
从数学角度分析一下：
a = a ^ b
b = a ^ b = (a ^ b) ^ b = a ^ (b ^ b) = a ^ 0 = a
a = a ^ b = (a ^ b) ^ b = (a ^ a) ^ b = b ^ 0 = b
## 赋值运算符
* i += 3
* i \*= 3

所有的算术运算符都可以和赋值运算符一起使用。
# 表达式 & 程序结构
## 表达式 & 语句
表达式：常量/变量和运算符一起构成，表达式有返回值
语句：关键字和表达式一起构成，语句没有返回值
## 顺序结构
就是代码从上到下，一行一行执行
## 分支结构
### 单分支
单分支只有一个操作，条件成立去做操作，然后结束，否则直接结束。
```
a = 5
if a < 10:
    print('a less than 10')
print(a)
```
### 双分支
双分支就是当条件不成立的时候还多了一个操作，方便做逻辑处理。
```
a = 5
if a < 10:
    print('a less than 10')
else:
    print('a is not less than 10')
print(a)
```
双分支结构永远只有一个条件会被执行
### 嵌套
嵌套的意思就是，在if里面还可以有if
通过结构嵌套实现多分支
```
a = 5
if a < 10:
    print('a less than 10')
else:
    if a < 20:
        print('10 <= a < 20')
    else:
        print('a is not less than 10')
print(a)
```
### 关键字elif
```
a = 5
if a < 10:
    print('a less than 10')
elif a < 20:
    print('10 <= a < 20')
else:
    print('a is not less than 10')
print(a)
```
对于分支结构来说，总结一下就是：
1. 分支结构永远只有1个或者0个分支会被执行
2. 分支结构中所有条件是互斥的
3. 条件只能是bool类型或者可以隐式转换为bool类型
## 循环结构
### while
while循环需要一个条件支撑，如果条件为True，循环将继续。
### for in
python的for循环和其他语言不一样，在for关键字里实现了一个迭代协议，通过迭代协议完成了对可迭代对象的循环。
#### 提前终止
当在for循环体内，遇到break关键字的时候，将会结束本层循环，注意不是本次，是本层
如果是两个for循环,那么就会退出本层循环，进入上层循环的下一次循环中
```
for i in range(3):
    for j in range(5):
        print('j:' + str(j))
        if j % 2 == 0:
            print('i:',i,'j:',j)
            break
```
#### 跳过
continue是跳过本次循环，继续下一次循环，**注意这里是继续同一层的下一次循环**
```
for i in range(0,3):    
    if i % 2 != 0:
        print(i)
        continue
```
### else子句
在python中，for循环还有一个其他语言没有的关键字，else
这个else不是if的else，而是for的else。只有当for循环的主体循环全部结束后，才会去执行else语句。
举个栗子：
```
In[0]:
for i in range(10):
    pass
else:
    print('ok')
Out[0]:ok
```
如果循环体被break了呢？
```
In[0]:
for i in range(10):
    break
else:
    print('ok')
Out[0]:
```
如果是continue呢？
```
In[0]:
for i in range(10):
    continue
else:
    print('ok')
Out[0]:ok
```
结论：**当循环没有提前退出时，会执行else子句**




























